<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🧪 ぽんっと性格診断 | ぽんっとラボ</title>
<style>
body { font-family:'ヒラギノ丸ゴ Pro','Arial Rounded MT Bold',sans-serif; background:#fff; margin:0; padding:0; text-align:center; }
.wrapper { max-width:480px; margin:0 auto; padding:24px 16px; text-align:center; }
h1 { font-size:28px; margin-bottom:12px; color:#8e44ad; }
.question { font-size:16px; margin:24px 0 12px; }
.options { display:flex; flex-direction:column; gap:10px; }
.options button { padding:14px; border-radius:18px; border:none; background:#e3d0f2; box-shadow:0 4px 10px rgba(0,0,0,0.06); font-size:16px; cursor:pointer; transition:0.2s; }
.options button:hover { transform: scale(1.03); }
.options button:active { transform: scale(0.97); }
#result { font-size:18px; margin-top:32px; }
#back { margin-top:20px; display:inline-block; padding:10px 18px; border-radius:16px; background:#ffe6ef; text-decoration:none; color:#333; }
#loading { font-size:24px; margin-top:32px; color:#8e44ad; font-weight:bold; display:none; }
</style>
</head>
<body>
<div class="wrapper">
<h1>🧪 ぽんっと性格診断</h1>

<div id="quiz">
<p class="question" id="question"></p>
<div class="options" id="options"></div>
</div>

<div id="loading">ぽんっ…✨</div>
<div id="result"></div>
<a href="index.html" id="back" style="display:none;">🏠 ぽんっとTOPにもどる</a>
</div>

<script>
// 設問20個のサンプル（ランダム7問表示）
const questions = [
  { q: "今日の気分は、どんなかんじ？", a:["まったりのんびり","ちょっと冒険したい","軽やかに過ごしたい","ゆったりほっこり"] },
  { q: "おやつを選ぶなら？", a:["ふんわり甘いもの","クセのあるものに惹かれる","さっぱりしたもの","ほっとするもの"] },
  { q: "友達から見た自分は？", a:["癒し系っぽい","元気で刺激的","爽やかで軽やか","優しく落ち着く"] },
  { q: "飲み物を選ぶなら？", a:["甘くてほっとできる","ピリッと刺激的","さっぱりしてるもの","温かくて落ち着くもの"] },
  { q: "おやつを誰かに渡すなら？", a:["みんながほっこりするもの","元気をくれるもの","すっきり爽やかなもの","個性的で面白いもの"] },
  { q: "休日の過ごし方は？", a:["家でゆったり過ごす","外で体を動かす","散歩や軽い運動でリフレッシュ","カフェでまったり"] },
  { q: "理想のデザートは？", a:["かわいくて癒される","刺激的で個性を感じる","さっぱり軽やか","和風で落ち着く"] },
  { q: "最近気になることは？", a:["ゆったりと楽しむ","ちょっと冒険心","軽やかにチャレンジ","和やかに落ち着く"] }
];

// 結果サンプル（性格向き）
const results = [
  { name:"のんびり癒し系💛", desc:"落ち着いていて優しい雰囲気。周りもつい和むあなたです" },
  { name:"元気で冒険好き🔥", desc:"好奇心旺盛で行動力あり！みんなを引っ張る魅力があります" },
  { name:"爽やか軽やか🌿", desc:"周りも心地よくなる、明るく軽やかな性格です" },
  { name:"穏やか安心タイプ🍀", desc:"優しく落ち着いた雰囲気。みんなから信頼される存在です" },
  { name:"社交的スマイル😊", desc:"人と関わるのが得意で、笑顔が周りを明るくします" },
  { name:"思慮深いタイプ🧠", desc:"じっくり考える慎重派。頼れる雰囲気があります" }
];

let current = 0;
let scores = Array(results.length).fill(0);

// ランダムで設問を7問選ぶ
let quizOrder = [];
while(quizOrder.length < 7){
  let r = Math.floor(Math.random()*questions.length);
  if(!quizOrder.includes(r)) quizOrder.push(r);
}

// 配列シャッフル関数
function shuffleArray(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]] = [arr[j],arr[i]];
  }
  return arr;
}

function showQuestion(){
  const q = questions[quizOrder[current]];
  document.getElementById("question").innerText = q.q;

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  let shuffledOptions = shuffleArray([...q.a]);
  shuffledOptions.forEach((option,i)=>{
    const btn = document.createElement("button");
    btn.innerText = option;
    btn.onclick = ()=>{ scores[i % results.length]++; nextQuestion(); }; // 結果に紐付け
    optionsDiv.appendChild(btn);
  });
}

function nextQuestion(){
  current++;
  if(current < quizOrder.length){
    showQuestion();
  } else {
    showLoading();
  }
}

function showLoading(){
  document.getElementById("quiz").style.display="none";
  const loading = document.getElementById("loading");
  loading.style.display="block";
  setTimeout(showResult,1000);
}

function showResult(){
  document.getElementById("loading").style.display="none";
  const maxIndex = scores.indexOf(Math.max(...scores));
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = `<p>ぽんっ！✨</p><h2>${results[maxIndex].name}</h2><p>${results[maxIndex].desc}</p>`;
  document.getElementById("back").style.display="inline-block";
}

showQuestion();
</script>
</body>
</html>
