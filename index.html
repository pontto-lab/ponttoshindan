<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã½ã‚“ã£ã¨æ€§æ ¼è¨ºæ–­ | ã½ã‚“ã£ã¨ãƒ©ãƒœ</title>
<style>
body { font-family:'ãƒ’ãƒ©ã‚®ãƒä¸¸ã‚´ Pro','Arial Rounded MT Bold',sans-serif; background:#fff0f8; margin:0; padding:0; }
.wrapper { max-width:480px; margin:0 auto; padding:24px 16px; text-align:center; }
h1 { font-size:28px; margin-bottom:16px; color:#8e44ad; }
button { padding:14px; border-radius:18px; border:none; background:#d8bfe6; color:#333; font-size:16px; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin:6px 0; }
button:active { transform:scale(0.97); }
#result { font-size:18px; margin-top:32px; display:none; }
#loading { font-size:24px; margin-top:32px; display:none; color:#8e44ad; font-weight:bold; }
#back { margin-top:20px; display:none; padding:10px 18px; border-radius:16px; background:#e0c4f1; text-decoration:none; color:#333; }
</style>
</head>
<body>
<div class="wrapper">
<h1>ğŸ§ª ã½ã‚“ã£ã¨æ€§æ ¼è¨ºæ–­</h1>
<div id="quiz">
  <p id="question"></p>
  <div id="answers"></div>
</div>
<div id="loading">ã½ã‚“ã£âœ¨</div>
<div id="result"></div>
<a href="index.html" id="back">ğŸ  ã½ã‚“ã£ã¨TOPã«ã‚‚ã©ã‚‹</a>
</div>

<script src="questions.js"></script>
<script>
// --- ãƒ©ãƒ³ãƒ€ãƒ æŠ½å‡º & å›ç­”å‡¦ç† ---
function shuffle(array){return array.sort(()=>Math.random()-0.5);}
let quizQuestions = shuffle(questions).slice(0,7);
let scores = {A:0,B:0,C:0,D:0};
let current=0;

function showQuestion(){
  const q = quizQuestions[current];
  document.getElementById('question').innerText = q.q;
  const ansDiv = document.getElementById('answers');
  ansDiv.innerHTML = "";
  let choices=[];
  for(let cat in q.a){ choices=choices.concat(q.a[cat]); }
  choices=shuffle(choices);
  choices.forEach(text=>{
    const btn=document.createElement('button');
    btn.innerText=text;
    btn.onclick=()=>{ recordAnswer(q,text); };
    ansDiv.appendChild(btn);
  });
}

function recordAnswer(question,text){
  for(let cat in question.a){ if(question.a[cat].includes(text)){ scores[cat]++; break; } }
  current++;
  if(current<quizQuestions.length){ showQuestion(); }
  else{ showResult(); }
}

function showResult(){
  document.getElementById('quiz').style.display="none";
  document.getElementById('loading').style.display="block";
  setTimeout(()=>{
    document.getElementById('loading').style.display="none";
    const maxCat = Object.keys(scores).reduce((a,b)=>scores[a]>=scores[b]?a:b);
    let resultText="";
    if(maxCat=="A") resultText="ğŸ±ğŸ’– ãµã‚“ã‚ã‚Šç™’ã—ç³»ã‚¿ã‚¤ãƒ—ï¼å„ªã—ãç©ã‚„ã‹ã«éã”ã™ã‚ãªãŸâ™¡";
    if(maxCat=="B") resultText="ğŸ¯ğŸ”¥ å…ƒæ°—ã§å†’é™ºå¿ƒã‚ã‚‹ã‚ãªãŸï¼ã¿ã‚“ãªã‚’å¼•ã£å¼µã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—âœ¨";
    if(maxCat=="C") resultText="ğŸ¦ŠğŸŒ¸ çˆ½ã‚„ã‹è»½ã‚„ã‹ã‚¿ã‚¤ãƒ—ï¼å‘¨ã‚Šã‚‚æ°—æŒã¡ã„ã„æ˜ã‚‹ã„é›°å›²æ°—â˜†";
    if(maxCat=="D") resultText="ğŸ¶ğŸ’› è½ã¡ç€ãå’Œã¿ç³»ã‚¿ã‚¤ãƒ—ï¼å®‰å¿ƒæ„Ÿã‚ã‚‹ç©ã‚„ã‹ãªã‚ãªãŸâ˜ºï¸";
    const resDiv=document.getElementById('result');
    resDiv.innerHTML=`<h2>${resultText}</h2>`;
    resDiv.style.display="block";
    document.getElementById('back').style.display="inline-block";
  },1200);
}

showQuestion();
</script>
</body>
</html>
